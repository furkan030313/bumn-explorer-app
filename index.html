<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eksplorator Struktur Holding BUMN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        .content-card { transition: all 0.3s ease-in-out; }
        .subsidiary-list { display: none; }
        .group-item-enter { animation: fadeIn 0.6s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

<div class="flex flex-col md:flex-row min-h-screen">
    <aside id="sidebar" class="w-full md:w-72 bg-white border-r border-slate-200 p-4 md:p-6 md:fixed md:h-full flex-shrink-0 rounded-b-2xl md:rounded-r-3xl md:rounded-bl-none shadow-lg">
        <div class="flex items-center gap-3 mb-6">
            <div class="bg-blue-600 text-white p-3 rounded-xl shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
            </div>
            <h1 class="text-2xl font-extrabold text-slate-900">Holding BUMN</h1>
        </div>
        <nav id="cluster-nav">
            <h2 class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4">Klaster Usaha</h2>
            <ul class="space-y-2"></ul>
        </nav>
    </aside>

    <main class="flex-1 md:ml-72 p-6 sm:p-8 md:p-10">
        <div id="main-content"></div>
    </main>
</div>

<script>
// ==== DATA: 11 KLASTER BUMN ====
const bumnData = {
    "clusters": [
        {
            "name": "Energi, Minyak dan Gas",
            "holdings": [
                {
                    "name": "PT Pertamina (Persero)",
                    "subsidiaries": [
                        { "name": "PT Nusantara Regas" },
                        { "name": "PPT Energy Trading Co Ltd" },
                        { "name": "PT Pertamina Training & Consulting" },
                        { "name": "PT Pertamina Hulu Energi (PHE)", "sub_subsidiaries": ["PT Elnusa Tbk", "PT Pertamina Drilling Services Indonesia (PDSI)", "PT Badak NGL", "65 anak perusahaan lainnya"] },
                        { "name": "PT Pelita Air Service" },
                        { "name": "PT Pertamina Pedeve Indonesia" },
                        { "name": "PT Pertamina Bina Medika" },
                        { "name": "PT Kilang Pertamina Internasional", "sub_subsidiaries": ["Pertamina Rosneft Pengolahan & Petrokimia"] },
                        { "name": "PT Tuban Petrochemical Industries" },
                        { "name": "PT Pertamina International Shipping" },
                        { "name": "PT Asuransi Tugu Pratama Indonesia Tbk" },
                        { "name": "PT Pertamina Power Indonesia", "sub_subsidiaries": ["PT Industri Baterai Indonesia", { "name": "PT Pertamina Geothermal Energy (PGE)", "sub_subsidiaries": ["PT Geothermal Energi Seulawah", "PT Pertamina Geothermal Energy Kotamobagu"]}] },
                        { "name": "PT Pertamina Patra Niaga", "sub_subsidiaries": ["Pertamina Retail", "Pertamina International M&D", "Pertamina Petrochemical Trading", "Patra SK", { "name": "PT Pertamina Lubricants", "sub_subsidiaries": ["Anak perusahaan di Thailand", "PT Katalis Sinergi Indonesia (patungan)"] }, "Pertamina Patra Logistik", "Pertamina Maintenance & Construction", "Pertamina International Timor"] },
                        { "name": "PT Patra Jasa" },
                        { "name": "PT Perusahaan Gas Negara Tbk (PGN)", "sub_subsidiaries": ["Gagas Energi", "PGAS Solution", "PGAS Telekomunikasi Nusantara", "Nusantara Regas", "Transportasi Gas Negara"] }
                    ]
                },
                {
                    "name": "PT Perusahaan Listrik Negara (Persero) (PLN)",
                    "subsidiaries": [
                        { "name": "PT Prima Layanan Nasional Enjiniring (PLN Enjiniring)" },
                        { "name": "PT PLN Indonesia Power" },
                        { "name": "PT PLN Nusantara Power", "sub_subsidiaries": [{ "name": "PT PLN Nusantara Power Construction (PLN NPC)", "sub_subsidiaries": ["PT Prima Power Nusantara"]}] },
                        { "name": "PT PLN Batam" },
                        { "name": "PT PLN Tarakan" },
                        { "name": "PT PLN Energi Primer Indonesia" },
                        { "name": "PT Haleyora Power", "sub_subsidiaries": ["PT Haleyora Powerindo (HPI)"] },
                        { "name": "Majapahit Holding BV" },
                        { "name": "PT Mandau Cipta Tenaga Nusantara" },
                        { "name": "PT PLN ICON Plus" },
                        { "name": "PT Pelayaran Bahtera Adhiguna" },
                        { "name": "PT PLN Batu Bara" },
                        { "name": "PT Pengembangan Listrik Nasional Geothermal" }
                    ]
                }
            ]
        },
        {
            "name": "Kesehatan",
            "holdings": [
                {
                    "name": "PT Bio Farma (Persero)",
                    "subsidiaries": [
                        { "name": "PT Kimia Farma Tbk", "sub_subsidiaries": ["Kimia Farma Apotek", "Phapros", "Sinkona Indonesia Lestari", "Kimia Farma Trading & Distribution", "Kimia Farma Sungwun Pharmacopia", "Kimia Farma Dawaa Co., Ltd."] },
                        { "name": "Indofarma" },
                        { "name": "INUKI" }
                    ]
                }
            ]
        },
        {
            "name": "Manufaktur",
            "holdings": [
                { "name": "PT Biro Klasifikasi Indonesia (Persero) (ID Survey)", "subsidiaries": [{ "name": "PT Sucofindo" }] },
                {
                    "name": "PT Len Industri (Persero) (DEFEND ID)",
                    "subsidiaries": [
                        { "name": "PT PAL Indonesia" },
                        { "name": "PT Surya Energi Indotama" },
                        { "name": "PT Eltran Indonesia" },
                        { "name": "PT Dahana" },
                        { "name": "PT Dirgantara Indonesia", "sub_subsidiaries": ["IPTN North America, Inc.", "PT General Electric Nusantara Turbine Services (GENTS)", "PT General Electric Technology Indonesia (GETI)", "PT Nusantara Turbin dan Propulsi"] }
                    ]
                },
                {
                    "name": "PT Krakatau Steel (Persero) Tbk",
                    "subsidiaries": [
                        { "name": "PT Meratus Jaya Iron Steel" },
                        { "name": "PT Krakatau Engineering" },
                        { "name": "PT Krakatau Baja Konstruksi" },
                        { "name": "PT Krakatau Sarana Infrastruktur" }
                    ]
                },
                {
                    "name": "PT Mineral Industri Indonesia (Persero) (MIND ID)",
                    "subsidiaries": [
                        { "name": "PT Indonesia Asahan Aluminium (Inalum)", "sub_subsidiaries": ["PT Indonesia Aluminium Alloy", "PT Borneo Alumina Indonesia", "PT Industri Baterai Indonesia", "PT Sarana Multi Logam Indonesia (SMLI)"] },
                        { "name": "MIND ID Trading Pte Ltd" },
                        { "name": "PT TIMAH Tbk", "sub_subsidiaries": ["Perbengkelan & galangan kapal", "Jasa rekayasa teknik", "Penambangan timah", "Konsultasi & penelitian", "Penambangan non-timah"] },
                        { "name": "PT Bukit Asam Tbk (PTBA)", "sub_subsidiaries": ["PT Batubara Bukit Kendi", "PT Bukit Asam Banko", "PT Bukit Asam Metana Enim", "PT Bukit Asam Metana Ombilin", "PT Bukit Asam Prima", "PT Bukit Energi Investama", "PT Bukit Multi Investama", "PT Internasional Prima Coal"] },
                        { "name": "PT Aneka Tambang Tbk (ANTM)", "sub_subsidiaries": ["PT Indonesia Chemical Alumina", "PT Cibaliung Sumberdaya", "PT Mega Citra Utama", "PT Antam Resourcindo", "Asia Pacific Nickel", "PT Jatim Arindo Persada"] },
                        { "name": "PT Freeport Indonesia" }
                    ]
                }
            ]
        },
        {
            "name": "Pangan dan Pupuk",
            "holdings": [
                {
                    "name": "PT Pupuk Indonesia (Persero)",
                    "subsidiaries": [
                        { "name": "PT Pupuk Sriwidjaja Palembang" },
                        { "name": "PT Pupuk Kalimantan Timur", "sub_subsidiaries": ["PT Kaltim Industrial Estate (KIE)", "PT Kaltim Pasifik Amoniak (KPA)", "Kalianusa (patungan)"] },
                        { "name": "PT Petrokimia Gresik", "sub_subsidiaries": ["PT Petrokimia Kayaku", "PT Petrosida Gresik", "PT Petro Jordan Abadi (50%)"] },
                        { "name": "PT Rekayasa Industri" },
                        { "name": "PT Pupuk Indonesia Niaga", "sub_subsidiaries": ["PT Sigma Utama"] },
                        { "name": "PT Pupuk Iskandar Muda" },
                        { "name": "PT Pupuk Kujang Cikampek" }
                    ]
                },
                { "name": "Perum BULOG", "subsidiaries": [{ "name": "PT Mitra Bumdes Nusantara", "sub_subsidiaries": ["PT Jasa Prima Logistik BULOG (PT JPLB)", "PT Gendis Multi Manis"] }] },
                {
                    "name": "PT Rajawali Nusantara Indonesia (Persero) (ID Food)",
                    "subsidiaries": [
                        { "name": "PT Mitra Kerinci" },
                        { "name": "PT GIEB Indonesia" },
                        { "name": "PT Perkebunan Mitra Ogan" },
                        { "name": "PT PG Candi Baru" },
                        { "name": "PT Laras Astra Kartika" },
                        { "name": "PT Berdikari" },
                        { "name": "PT Garam" }
                    ]
                }
            ]
        },
        {
            "name": "Perkebunan dan Kehutanan",
            "holdings": [
                {
                    "name": "PT Perkebunan Nusantara III (Persero)",
                    "subsidiaries": [
                        {"name": "PTPN I, II, IV-XIV (13 PTPN)"},
                        { "name": "PT Kawasan Industri Nusantara" },
                        { "name": "PT Riset Perkebunan Nusantara" },
                        { "name": "PT Sri Pamela Medika Nusantara" },
                        { "name": "PT Industri Nabati Lestari" },
                        { "name": "PT LPP Agro Nusantara" },
                        { "name": "PT Sinergi Gula Nusantara", "sub_subsidiaries": ["Mengelola 36 pabrik gula"] },
                        { "name": "PT Japan Indonesia China Wood" },
                        { "name": "PT Kharisma Pemasaran Bersama Nusantara" },
                        { "name": "PT Industri Karet Nusantara" },
                        { "name": "PT ESW Nusa Tiga" },
                        { "name": "PT Bio Industri Nusantara (BIONUSA)" },
                        { "name": "PT Sarana Agro Nusatara (SAN)" }
                    ]
                },
                {
                    "name": "Perum Perhutani",
                    "subsidiaries": [
                        { "name": "PT Inhutani I, II, III, IV, V" },
                        { "name": "PT BUMN Hijau Lestari I" },
                        { "name": "PT Palawi Risorsis" }
                    ]
                }
            ]
        },
        {
            "name": "Jasa Asuransi dan Dana Pensiun",
            "holdings": [
                {
                    "name": "PT Bahana Pembinaan Usaha Indonesia (Persero) (IFG)",
                    "subsidiaries": [
                        { "name": "PT Asuransi Kredit Indonesia (Askrindo)" },
                        { "name": "PT Asuransi Kerugian Jasa Raharja", "sub_subsidiaries": ["PT Jasaraharja Putera (JRP INSURANCE)"] },
                        { "name": "PT Asuransi Jasa Indonesia (Jasindo)" },
                        { "name": "PT Jaminan Kredit Indonesia (Jamkrindo)" },
                        { "name": "PT Grahaniaga Tatautama", "sub_subsidiaries": ["PT Griyacanggu Tatautama (Hotel/Condotel Bali)", "PT Nusa Sarana Pradipta (Financial Club Jakarta)"] },
                        { "name": "PT Asuransi Jiwa IFG (IFG Life)" },
                        { "name": "PT Bahana Sekuritas" },
                        { "name": "PT Bahana TCW Investment Management" },
                        { "name": "PT Bahana Artha Ventura" },
                        { "name": "PT Bahana Kapital Investa" }
                    ]
                },
                { "name": "PT Reasuransi Indonesia Utama (Persero)", "subsidiaries": [{ "name": "PT Asuransi ASEI Indonesia" }] }
            ]
        },
        {
            "name": "Jasa Infrastruktur",
            "holdings": [
                { "name": "PT Semen Indonesia (Persero) Tbk (SIG)", "subsidiaries": [{ "name": "PT Semen Padang" }, { "name": "PT Semen Tonasa" }] },
                { "name": "PT Jasa Marga (Persero) Tbk", "subsidiaries": [{ "name": "PT Jasamarga Manado Bitung" }, { "name": "PT Marga Trans Nusantara" }] }
            ]
        },
        {
            "name": "Jasa Keuangan",
            "holdings": [
                { "name": "PT Bank Rakyat Indonesia (Persero) Tbk (BRI)", "subsidiaries": [{ "name": "PT Permodalan Nasional Madani (PNM)" }] },
                { "name": "PT Bank Negara Indonesia (Persero) Tbk (BNI)", "subsidiaries": [{ "name": "PT BNI Sekuritas" }] },
                { "name": "PT Bank Mandiri (Persero) Tbk", "subsidiaries": [{ "name": "PT Mandiri Utama Finance" }] },
                { "name": "Perum Percetakan Uang Republik Indonesia (Peruri)", "subsidiaries": [{ "name": "PT Peruri Properti" }] }
            ]
        },
        {
            "name": "Jasa Logistik",
            "holdings": [
                { "name": "PT Pelabuhan Indonesia (Pelindo)", "subsidiaries": [{ "name": "PT Pelindo Terminal Petikemas (TPI)" }] },
                { "name": "PT Kereta Api Indonesia (Persero) (PT KAI)", "subsidiaries": [{ "name": "PT Reska Multi Usaha" }] }
            ]
        },
        {
            "name": "Jasa Pariwisata dan Penerbangan",
            "holdings": [
                { "name": "PT Aviasi Pariwisata Indonesia (Persero) (InJourney)", "subsidiaries": [{ "name": "PT Angkasa Pura Indonesia (InJourney Airports)" }] },
                { "name": "PT Garuda Indonesia (Persero)", "subsidiaries": [{ "name": "PT Aero Wisata" }] }
            ]
        },
        {
            "name": "Jasa Telekomunikasi dan Media",
            "holdings": [
                { "name": "PT Telekomunikasi Indonesia (Persero) Tbk (Telkom Indonesia)", "subsidiaries": [{ "name": "PT PINS Indonesia" }] },
                { "name": "PT Produksi Film Negara (Persero)", "subsidiaries": [] }
            ]
        }
    ]
};
// ==== END DATA ====

const clusterNav = document.querySelector('#cluster-nav ul');
const mainContent = document.getElementById('main-content');
let activeClusterLink = null;
let chartInstance = null;

const createWelcomeMessage = () => `
    <div class="text-center bg-white p-12 rounded-3xl shadow-xl border border-slate-200 group-item-enter">
        <div class="flex justify-center mb-6">
            <div class="bg-blue-100 text-blue-600 p-5 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
            </div>
        </div>
        <h2 class="text-3xl font-extrabold mb-3 text-slate-900">Selamat Datang di Eksplorator BUMN</h2>
        <p class="text-lg text-slate-600 max-w-2xl mx-auto">Aplikasi ini memvisualisasikan struktur kompleks Holding BUMN di Indonesia. Pilih salah satu klaster usaha dari menu di samping untuk mulai menjelajahi perusahaan holding, anak perusahaan, dan entitas turunannya.</p>
    </div>
`;

const createSubsidiaryHTML = (subsidiaries) => {
    if (!subsidiaries || subsidiaries.length === 0) return '';
    let html = '<ul class="pl-6 mt-3 space-y-2 border-l-2 border-blue-200">';
    subsidiaries.forEach(sub => {
        let subName = typeof sub === 'string' ? sub : sub.name;
        let hasSubSubs = typeof sub === 'object' && sub.sub_subsidiaries && sub.sub_subsidiaries.length > 0;
        html += `
            <li class="text-slate-700 relative">
                <span class="absolute -left-[30px] top-2 h-0.5 w-6 bg-blue-200"></span>
                <div class="flex items-start gap-2">
                    <span class="text-blue-600 mt-1">&#8227;</span>
                    <div class="flex-1">
                        <span>${subName}</span>
                        ${hasSubSubs ? createSubsidiaryHTML(sub.sub_subsidiaries) : ''}
                    </div>
                </div>
            </li>`;
    });
    html += '</ul>';
    return html;
};

const displayCluster = (clusterName) => {
    const clusterData = bumnData.clusters.find(c => c.name === clusterName);
    if (!clusterData) {
        mainContent.innerHTML = createWelcomeMessage();
        return;
    }

    let contentHTML = `
        <div class="group-item-enter">
            <h2 class="text-4xl font-extrabold text-blue-800 mb-3">${clusterData.name}</h2>
            <p class="text-xl text-slate-600 mb-10">Berikut adalah pemetaan perusahaan holding di dalam klaster ${clusterData.name}. Klik pada setiap kartu untuk melihat struktur anak perusahaannya.</p>
        </div>
    `;
    
    if (clusterData.holdings && clusterData.holdings.length > 0) {
        contentHTML += `
            <div class="mb-12 group-item-enter" style="animation-delay: 0.1s;">
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-slate-200">
                    <h3 class="text-2xl font-bold text-slate-800 mb-6">Distribusi Anak Perusahaan per Holding</h3>
                    <div class="chart-container">
                        <canvas id="clusterChart"></canvas>
                    </div>
                </div>
            </div>
        `;
    }

    contentHTML += '<div class="space-y-8">';
    clusterData.holdings.forEach((holding, index) => {
        const hasSubsidiaries = holding.subsidiaries && holding.subsidiaries.length > 0;
        contentHTML += `
            <div class="bg-white rounded-2xl shadow-md border border-slate-200 overflow-hidden content-card group-item-enter" style="animation-delay: ${0.2 + index * 0.1}s;">
                <button class="w-full text-left p-7 hover:bg-blue-50/20 focus:outline-none flex justify-between items-center transition-colors duration-200" data-target="subs-for-${index}">
                    <div>
                        <h3 class="text-2xl font-semibold text-blue-700">${holding.name}</h3>
                        <p class="text-slate-600 mt-2">${hasSubsidiaries ? holding.subsidiaries.length + ' anak perusahaan terdaftar' : 'Tidak ada data anak perusahaan'}</p>
                    </div>
                    <svg class="w-7 h-7 text-slate-400 transition-transform transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </button>
                <div id="subs-for-${index}" class="subsidiary-list px-7 pb-7 border-t border-slate-100">
                    <div class="pt-5">
                        ${hasSubsidiaries ? createSubsidiaryHTML(holding.subsidiaries) : '<p class="text-slate-500">Informasi tidak tersedia.</p>'}
                    </div>
                </div>
            </div>`;
    });
    contentHTML += '</div>';

    mainContent.innerHTML = contentHTML;

    if (chartInstance) { chartInstance.destroy(); }
    const chartCtx = document.getElementById('clusterChart')?.getContext('2d');
    if (chartCtx) {
        const labels = clusterData.holdings.map(h => h.name.replace(/ \(Persero\)| Tbk| \(Persero\) Tbk/g, ''));
        const data = clusterData.holdings.map(h => h.subsidiaries ? h.subsidiaries.length : 0);
        chartInstance = new Chart(chartCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Jumlah Anak Perusahaan',
                    data: data,
                    backgroundColor: 'rgba(59, 130, 246, 0.8)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 1,
                    borderRadius: 8,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, grid: { color: '#e2e8f0' } },
                    x: { 
                        grid: { display: false },
                        ticks: {
                            autoSkip: false,
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#1e293b',
                        titleFont: { size: 16, weight: 'bold' },
                        bodyFont: { size: 14 },
                        padding: 14,
                        cornerRadius: 8,
                        displayColors: false
                    }
                }
            }
        });
    }
};

mainContent.addEventListener('click', (e) => {
    const button = e.target.closest('button[data-target]');
    if (button) {
        const targetId = button.getAttribute('data-target');
        const targetElement = document.getElementById(targetId);
        const icon = button.querySelector('svg');

        if (targetElement) {
            const isVisible = targetElement.style.display === 'block';
            if (isVisible) {
                targetElement.style.display = 'none';
                icon.classList.remove('rotate-180');
            } else {
                targetElement.style.display = 'block';
                icon.classList.add('rotate-180');
            }
        }
    }
});

document.addEventListener('DOMContentLoaded', () => {
    bumnData.clusters.forEach(cluster => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = '#';
        a.textContent = cluster.name;
        a.className = 'flex items-center p-3 text-slate-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200 font-medium';
        a.dataset.cluster = cluster.name;

        a.addEventListener('click', (e) => {
            e.preventDefault();

            if (activeClusterLink) {
                activeClusterLink.classList.remove('bg-blue-100', 'text-blue-800', 'font-semibold');
            }
            a.classList.add('bg-blue-100', 'text-blue-800', 'font-semibold');
            activeClusterLink = a;

            displayCluster(cluster.name);
        });
        li.appendChild(a);
        clusterNav.appendChild(li);
    });
    mainContent.innerHTML = createWelcomeMessage();
});
</script>

</body>
</html>
